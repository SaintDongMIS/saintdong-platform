# 資料庫設計

## 主鍵設計策略

### 1. 單一業務主鍵設計 (目前採用)

為簡化初期開發與資料管理，目前採用「單一業務主鍵」的設計策略。

```sql
CREATE TABLE 費用報銷單 (
  [表單編號] NVARCHAR(50) PRIMARY KEY,  -- 業務主鍵
  -- 其他欄位...
);
```

### 2. 為什麼選擇業務主鍵？

#### **優點**

- **簡潔直觀**: 資料模型與業務邏輯直接對應，易於理解。
- **開發效率**: 減少了管理技術主鍵 (`id`) 的複雜性，加快開發速度。
- **資料唯一性**: `表單編號` 在業務上是唯一的，直接作為主鍵可確保資料的完整性。
- **API 設計**: RESTful API 直接使用有意義的 `表單編號` 作為資源識別碼，更具可讀性。

#### **考量**

- **查詢效能**: 雖然字串主鍵的查詢效能理論上略低於整數主鍵，但在本專案預期的資料量（十萬筆以內）下，效能差異微乎其微，可忽略不計。
- **未來擴展**: 若未來系統規模擴大，或需要與更多外部系統進行複雜關聯，屆時可再評估是否引入技術主鍵 (`id`) 進行重構。目前的設計已能滿足現階段需求。

### 3. 索引策略

#### **主鍵索引**

- `[表單編號]` 作為主鍵，SQL Server 會自動為其建立一個唯一的聚簇索引，確保查詢效率。

#### **未來可考慮的索引**

若未來有頻繁的查詢需求，可根據情境添加非聚簇索引，以提升效能。

```sql
-- 查詢索引：提升常用查詢效能
CREATE INDEX IX_費用報銷單_申請人 ON 費用報銷單([申請人姓名]);
CREATE INDEX IX_費用報銷單_申請日期 ON 費用報銷單([申請日期]);
CREATE INDEX IX_費用報銷單_費用歸屬 ON 費用報銷單([費用歸屬]);
```

## 結論

**目前採用單一業務主鍵設計**：

- `[表單編號]` (NVARCHAR) 作為主鍵。

此設計在專案初期能提供最佳的開發效率與直觀性，並已能滿足目前的業務與效能需求。
